### https

由非对称加密构成，rsa 算法，
服务器 秘钥由公钥+私钥构成
客户端 产生被公钥加密后的秘钥
rsa 特点是使用公钥无法解密只能加密，只有拥有服务器的私钥才能解密
会话秘钥：双方通讯才存在，新窗口会有新的

https 由普通 http+tls 构成
期间大部分工作是由 tls 完成
解决通信过程中的安全问题，保证通信过程中数据安全

剩下的工作由堆成加密完成

### HTTPS 握手过程中，客户端如何验证证书合法性

防止中间人攻击，服务器存在的公钥无法解密，
服务器先检查证书，证书由 CA 颁发，验证证书的颁发机构、证书签名，
公钥加密客户端堆成秘钥，服务器使用私钥解密
公钥是无法解密的，只有拥有私钥才能解密
双方拥有共同秘钥
正式开始通信

（加密钥匙跟解密钥匙不相同，对外公开是公钥，服务器存放私钥
中间人只有公钥没有服务器的私钥
通过 rsa 秘钥交换）

递归本质--->函数本质--->函数调用栈
递归解法：划分，分别求解，汇总

栈---一种数据结构,类比为一摞盘子，最先进，最后出
终止条件---基本情况

### CDN 的作用

资源调度：CDN 会根据用户接入网络的 ip 寻找距离用户最优路径的服务器。调度的方式主要有 DNS 调度、http 302 调度、使用 HTTP 进行的 DNS 调度（多用于移动端）；
缓存策略和数据检索：CDN 服务器使用高效的算法和数据结构，快速的检索资源和更新读取缓存；
网络优化：从 OSI 七层模型进行优化，达到网络优化的目的。
L1 物理层：硬件设备升级提高速度
L2 数据链路层：寻找更快的网络节点、确保 Lastmile 尽量短
L3 路由层：路径优化，寻找两点间最优路径
L4 传输层：协议 TCP 优化，保持长连接、TCP 快速打开
L7 应用层：静态资源压缩、请求合并

### http2 有什么缺点

因为只开一个 tcp 链接 一旦丢包 tcp 会做丢包重传 然后就导致队头阻塞速度可能比 1.1 还慢，http2 解决了 http 的队头阻塞 但是又来了 tcp 的队头阻塞 所以后来谷歌出的 quick 就用了 udp 去改 然后就成了 http3

### http2 是如何做分帧的

采用二进制传输将请求和数据切割为帧，在帧的首部插入一定的字节，用以标识当前帧属于哪个流

### keepalive 是多个 tcp

长连接是串行的，实际上并不是多路复用，http2 才是真的实现了多路复用

### JSONP 流程

[答案](https://www.zhihu.com/people/codefalling/posts)

### 什么是 csrf

攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。

受害者登录 a.com，并保留了登录凭证（Cookie）。
攻击者引诱受害者访问了 b.com。
b.com 向 a.com 发送了一个请求：a.com/act=xx。浏览器会…
a.com 接收到请求后，对请求进行验证，并确认是受害者的凭证，误以为是受害者自己发送的请求。
a.com 以受害者的名义执行了 act=xx。
攻击完成，攻击者在受害者不知情的情况下，冒充受害者，让 a.com 执行了自己定义的操作。

CSRF 的特点
攻击一般发起在第三方网站，而不是被攻击的网站。被攻击的网站无法防止攻击发生。
攻击利用受害者在被攻击网站的登录凭证，冒充受害者提交操作；而不是直接窃取数据。
整个过程攻击者并不能获取到受害者的登录凭证，仅仅是“冒用”。
跨站请求可以用各种方式：图片 URL、超链接、CORS、Form 提交等等。部分请求方式可以直接嵌入在第三方论坛、文章中，难以进行追踪。

CSRF 通常是跨域的，因为外域通常更容易被攻击者掌控。但是如果本域下有容易被利用的功能，比如可以发图和链接的论坛和评论区，攻击可以直接在本域下进行，而且这种攻击更加危险。
解决方法 1.使用 Origin Header、referer header 确定来源域名 2.设置 Referer Policy 的方法有三种：
在 CSP 设置
页面头部增加 meta 标签
a 标签增加 referrerpolicy 属性 3.分布式校验 token 计算出结果，校验是无需存储 token，再次计算，将 token 中的时间戳与登录时间比对，这么做每一个请求都携带 token 使得每一个页面、接口都对应输出和校验，工作量繁重
用户输入验证码密码也可以起到预防 csrf 作用 4.双重 cookie 验证
用户访问页面注入 cookie，像后端发起请求时取出 cookie，后端验证 cookie 字段是否与 url 参数中字段一致，不一致就拒绝请求

### 题外话

https 证书获取方法
github 上下载 acme.sh 脚本，acme 免费证书
cdn 会获得免费证书，七牛充值 20 元
